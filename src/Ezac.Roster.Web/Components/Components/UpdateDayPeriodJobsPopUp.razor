@inject IJobService _jobService

@if (string.IsNullOrWhiteSpace(feedback) == false)
{
    <div class="alert alert-success" role="alert">
        @feedback
    </div>
}

<div class="container">
    <div class="row">
        <div class="col-lg-12">
            @if (Day != null)
            {
                <h4>@Day.Date.ToString("ddd d/M")</h4>
                <h4>@DayPeriod.Name</h4>
            }
            <div>
                <label>Gewicht:</label>
                <input type="text" required @bind-value="weight">
            </div>
            <div>
                <label>Ervaring:</label>
                <input type="text" required @bind-value="experience">
            </div>
            <div class="mb-3">
                <select class="form-select" @onchange="e => SetSelectedJob(e)">
                    <option value="">Selecteer een dienst</option>
                    @foreach (var job in _Jobs)
                    {
                        <option>@job</option>
                    }
                </select>
            </div>
            <div>
                <button class="btn btn-primary" @onclick="AddJobToDayPeriod">Dienst toevoegen</button>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="mb-3">
                <select class="form-select" @onchange="SetSelectedDayPeriodJob">
                    <option value="">Selecteer een dienst</option>
                    @foreach (var job in _dayPeriodJobs)
                    {
                        <option value="@job.Id">@job.Name</option>
                    }
                </select>
            </div>
            <div>
                <label>Gewicht:</label>
                <input type="text" required @bind-value="updateWeight">
            </div>
            <div>
                <label>Ervaring:</label>
                <input type="text" required @bind-value="updateExperience">
            </div>
            <div>
                <button class="btn btn-primary" @onclick="DeleteJob">Dienst verwijderen</button>
            </div>
            <div>
                <button class="btn btn-primary" @onclick="UpdateJob">Dienst bijwerken</button>
            </div>
        </div>
    </div>
</div>

@code {
    private List<string> _Jobs { get; set; } = new List<string>();
    private List<Job> _dayPeriodJobs { get; set; } = new List<Job>();
    private string selectedJob { get; set; }
    private Job selectedDayPeriodJob { get; set; }
    private string feedback = string.Empty;
    private double weight;
    private int experience;
    private double updateWeight;
    private int updateExperience;

    [Parameter]
    public EventCallback OnAddJob { get; set; }
    [Parameter]
    public EventCallback OnDeleteJob { get; set; }
    [Parameter]
    public bool TogglePopUp { get; set; }
    [Parameter]
    public DayPeriod DayPeriod { get; set; }
    [Parameter]
    public Day Day { get; set; }

    
}
